# llll-ll プロジェクト技術仕様書

## プロジェクト概要

**llll-ll** は、金沢を拠点とするゲーム・アプリ開発者 kako-jun の個人ポートフォリオサイトです。

### プロダクト特徴

- **完全多言語対応**: 英語・中国語・日本語（3 言語完全対応）
- **ピクセルアート UI**: レトロサイバーパンク美学によるダークテーマ設計
- **モバイルファースト**: レスポンシブ設計による全デバイス最適化
- **SPA アーキテクチャ**: ページ遷移なしのスムーズな操作体験
- **YAML ベース CMS**: 開発者向け簡易コンテンツ管理システム
- **SSR パフォーマンス**: Next.js による高速ロード性能

### 技術要件

- **フレームワーク**: Next.js 15 (App Router) + TypeScript
- **スタイリング**: CSS3 Variables + レスポンシブデザイン
- **データ管理**: YAML ファイルベース + 型安全性保証
- **最適化**: 画像遅延読み込み、ビルド時最適化
- **アクセシビリティ**: セマンティック HTML、キーボードナビゲーション対応

## アーキテクチャ設計

### コンポーネント構成

```
App Structure:
├── LanguageSelector (フルスクリーン初期画面)
├── Header (スティッキーヘッダー + 言語切り替えバー)
├── IntroSection (折りたたみ式自己紹介)
├── ImageDisplay (トップページビジュアル)
├── ProjectList (プロダクト一覧管理)
│   ├── 検索・フィルタ・ソートUI
│   ├── ProjectCard × N (個別プロダクト表示)
│   └── ProjectModal (詳細ポップアップ)
├── Footer (ソーシャルリンク集)
└── PixelAnimations (背景アニメーション)
```

### データフロー設計

1. **言語選択** → 全コンテンツの言語状態管理
2. **プロダクトデータ** → API 経由で YAML ファイル読み込み
3. **検索・フィルタ** → クライアントサイド処理
4. **モーダル表示** → 状態管理によるレイヤー制御

## ユーザーエクスペリエンス仕様

### 画面遷移フロー

1. **初期画面**: 言語選択（フルスクリーン）
2. **プレビュー**: 言語ホバー時のメッセージ表示
3. **メインコンテンツ**: 言語決定後の SPA 表示
4. **プロダクト詳細**: モーダルによる詳細表示

### インタラクション設計

- **言語切り替え**: ヘッダー固定バーからリアルタイム変更
- **テーマ切り替え**: ダーク/ライトモード対応
- **スクロール**: 無限スクロール（12 件単位の段階読み込み）
- **検索機能**: リアルタイム絞り込み（タイトル・説明・タグ対応）

## 多言語対応アーキテクチャ

### 言語平等性設計

- **UI 表示**: テキストベース（国旗アイコン使用禁止）
- **配置原則**: 上下関係を示唆する配置の禁止
- **フォント対応**: Noto Sans + Noto Sans SC
- **文字エンコーディング**: UTF-8 による完全対応

### 翻訳管理システム

- **構造化**: `translations` オブジェクトによる型安全管理
- **メッセージ**: 40+ UI 文字列の完全翻訳
- **動的切り替え**: `useTranslation` フックによるリアルタイム言語変更
- **プロダクト情報**: 各言語別のタイトル・説明文対応

## プロダクト管理システム

### 表示機能仕様

- **レイアウト**: カード型リスト表示（モバイル: 1 列、PC: 1 列）
- **遅延読み込み**: 画像 lazy loading + 段階的コンテンツ表示
- **レスポンシブ**: 画面サイズに応じた最適レイアウト
- **無限スクロール**: 12 件ずつの自動読み込み

### 検索・フィルタリング

- **テキスト検索**:
  - 対象: タイトル・説明・タグ
  - 方式: 部分一致（大文字小文字区別なし）
- **タグフィルタ**:
  - 複数選択可能
  - AND 条件での絞り込み
  - 視覚的フィードバック
- **ソート機能**:
  - 更新日時ベース
  - 新しい順/古い順切り替え

### データ構造仕様

```typescript
interface Product {
  id: string;
  title: Record<Language, string>;
  description: Record<Language, string>;
  tags: string[];
  images: string[];
  animations?: string[];
  videos?: string[];
  demoUrl?: string;
  repositoryUrl?: string;
  blogUrl?: string;
  supportUrl?: string;
  createdAt: string;
  updatedAt: string;
  featured: boolean;
}
```

## UI/UX デザインシステム

### カラーパレット

- **ダークテーマ**: `#121212` (背景) + `#4ade80` (アクセント)
- **ライトテーマ**: `#ffffff` (背景) + `#28a745` (アクセント)
- **テキスト**: 3 段階コントラスト（プライマリ・セカンダリ・ミュート）
- **ボーダー**: `#404040` (ダーク) / `#dee2e6` (ライト)

### レスポンシブブレークポイント

- **モバイル**: 320px - 768px
- **タブレット**: 768px - 1024px
- **デスクトップ**: 1024px+
- **最大幅**: 800px (コンテナ制限)

### アニメーション仕様

- **フェードイン**: 0.5s ease-in
- **スライドアップ**: 0.5s ease-out
- **ホバー効果**: 0.2s - 0.3s transition
- **ピクセルアニメーション**: CSS keyframes

## パフォーマンス最適化

### 画像最適化

- **Next.js Image**: 自動最適化・遅延読み込み
- **フォーマット**: WebP 対応・フォールバック
- **サイズ**: レスポンシブ対応・適切なサイズ配信

### バンドル最適化

- **コード分割**: 動的 import 対応
- **ツリーシェイキング**: 未使用コード除去
- **静的生成**: プロダクトデータの事前ビルド

## 技術実装詳細

### ファイル構成

```
src/
├── app/
│   ├── layout.tsx          # Root Layout + Metadata
│   ├── page.tsx            # Main Page Component
│   ├── globals.css         # CSS Variables + Responsive
│   └── api/products/route.ts # Product API Endpoint
├── components/
│   ├── LanguageSelector.tsx # 言語選択UI + テーマ切り替え
│   ├── Header.tsx          # スティッキーヘッダー
│   ├── IntroSection.tsx    # 折りたたみ式自己紹介
│   ├── ImageDisplay.tsx    # トップページビジュアル
│   ├── ProjectList.tsx     # プロダクト一覧管理
│   ├── ProjectCard.tsx     # 個別プロダクトカード
│   ├── ProjectModal.tsx    # プロダクト詳細モーダル
│   ├── Footer.tsx          # ソーシャルリンク集
│   ├── ScrollToTop.tsx     # ページトップボタン
│   └── PixelAnimations.tsx # 背景アニメーション
├── data/products/          # YAML プロダクトデータ
├── lib/
│   └── i18n.ts            # 多言語翻訳システム
├── hooks/
│   └── useTheme.ts        # テーマ管理フック
└── types/
    └── index.ts           # TypeScript型定義
```

### 状態管理

- **言語状態**: `useState<Language>` でアプリ全体管理
- **プロダクトデータ**: API 取得 + クライアント側フィルタリング
- **テーマ状態**: `localStorage` 永続化 + CSS Variables
- **モーダル状態**: 単一プロダクト選択状態

## 実装状況トラッキング

### ✅ 完了済み機能 (100%)

#### 🎨 UI/UX システム

- **多言語対応システム**: 英語・中国語・日本語完全対応 + リアルタイム切り替え
- **レスポンシブデザイン**: モバイルファースト設計 + 全デバイス最適化
- **テーマシステム**: ダーク/ライトモード + CSS Variables + localStorage 永続化
- **アクセシビリティ**: セマンティック HTML + キーボードナビゲーション + ARIA ラベル

#### 🏗️ コアアーキテクチャ

- **Next.js 15 App Router**: SSR/SSG + TypeScript 完全型安全性
- **Component 分離設計**: 再利用可能コンポーネント + 単一責任原則
- **状態管理**: React Hooks + コンテキスト管理
- **API 設計**: RESTful + YAML データソース

#### 🌟 ユーザーエクスペリエンス

- **言語選択フロー**: フルスクリーン初期画面 + プレビュー機能
- **プロダクト管理**: 検索・フィルタ・ソート + 無限スクロール
- **モーダルシステム**: 詳細表示 + 画像ギャラリー + キーボード操作
- **ナビゲーション**: スティッキーヘッダー + ScrollToTop + パンくずリスト

#### ⚡ パフォーマンス最適化

- **画像最適化**: Next.js Image + WebP 対応 + 遅延読み込み
- **コード分割**: 動的 import + ツリーシェイキング
- **キャッシュ戦略**: 静的アセット + API レスポンス
- **SEO 対応**: メタデータ + structured data + サイトマップ + robots.txt

#### 🎯 高度な機能

- **アニメーションシステム**: TetrisBlock アニメーション（ヘッダーターゲット）
- **統一アイコンシステム**: ArrowIcon コンポーネント（5 方向対応）
- **エラーハンドリング**: 404 ページ + グローバルエラー境界 + 多言語対応
- **Web Vitals 監視**: パフォーマンス測定 + 分析

#### 🔧 開発体験

- **TypeScript 完全対応**: 型安全性 + インテリセンス
- **開発ツール**: ESLint + Prettier + 開発サーバー
- **デバッグ支援**: React DevTools 対応 + エラー境界

### 🎨 デザインシステム仕様

#### 統一アイコンシステム

- **ArrowIcon**: up, down, left, right, close の 5 方向対応
- **適用箇所**: ScrollToTop, IntroSection, ProjectList, ProjectModal
- **スタイル**: SVG + 統一 strokeWidth + レスポンシブサイズ

#### アニメーション仕様

- **TetrisBlock**: ヘッダー「llll-ll」テキストエリアをターゲット
- **配置範囲**: 画面幅 45%-55%（中央集中型）
- **動作**: 3 秒間隔生成 + 10px 積み上げ + 75px 以下で停止
- **視覚効果**: 白ブロック + ボーダー + ドロップシャドウ

#### ヘッダー統一

- **共通パディング**: `0.5rem 0`（言語セレクター + メインヘッダー）
- **言語ボタン**: `minWidth: "80px"` + `textAlign: "center"`で完全中央揃え
- **配置**: Flexbox + space-between + 視覚的バランス調整

### 📊 パフォーマンス指標

#### Core Web Vitals 対応

- **LCP**: 画像最適化 + 遅延読み込み
- **FID**: 動的 import + コード分割
- **CLS**: レイアウトシフト防止 + サイズ指定

#### SEO 強化

- **メタデータ**: 詳細な OGP + Twitter Cards + 多言語対応
- **Structured Data**: Person schema + 組織情報
- **サイトマップ**: 自動生成 + 多言語 URL 対応
- **robots.txt**: 適切なクローリング指示

### 🔗 外部連携

#### アイコン最適化

- **note.svg**: 公式版（24px） + 視認性向上
- **zenn.svg**: 公式版（20px） + 統一デザイン
- **favicon.ico**: llll-ll.com 同期 + 32x32px 対応

#### フォント最適化

- **Google Fonts**: preconnect + DNS prefetch
- **Noto Sans SC**: 中国語対応 + 適切な fallback
- **Critical CSS**: インライン化 + 初期表示最適化

### 🛠 メンテナンス性

#### ファイル構成最適化

```
📁 完成ファイル構成
├── 📄 public/
│   ├── favicon.ico (✅ llll-ll.com同期)
│   ├── robots.txt (✅ SEO対応)
│   └── icons/ (✅ 最適化済み)
├── 📄 src/app/
│   ├── layout.tsx (✅ メタデータ強化)
│   ├── page.tsx (✅ 動的import)
│   ├── sitemap.ts (✅ 多言語対応)
│   ├── not-found.tsx (✅ 404ページ)
│   └── global-error.tsx (✅ エラー境界)
├── 📄 src/components/ (✅ 全12コンポーネント完成)
└── 📄 src/lib/ (✅ ユーティリティ完備)
```

#### コード品質保証

- **型安全性**: 100% TypeScript Coverage
- **ESLint**: 0 warnings/errors
- **プロダクションビルド**: 成功確認済み
- **実機テスト**: デスクトップ + モバイル対応確認

### 📈 実装完了度: 100%

**🎊 プロジェクト完成 - すべての要件を満たした状態でデプロイ準備完了**

#### 次期バージョン構想

- **国際化ルーティング**: `/en`, `/ja`, `/zh` URL 対応
- **CMS 統合**: Headless CMS 導入検討
- **PWA 対応**: Service Worker + オフライン機能
- **A/B テスト**: パフォーマンス最適化実験

- ✅ **多言語システム**: 完全な 3 言語対応
- ✅ **テーマ切り替え**: ダーク/ライトモード
- ✅ **レスポンシブ UI**: 全デバイス対応レイアウト
- ✅ **プロダクト管理**: YAML→JSON 変換システム
- ✅ **検索・フィルタ**: リアルタイム絞り込み機能
- ✅ **モーダルシステム**: プロダクト詳細表示
- ✅ **ソーシャル統合**: SNS アイコンリンク集
- ✅ **ピクセルアニメーション**: 背景装飾システム
- ✅ **ヘッダー高さ統一**: 言語バー・メインヘッダー調整完了

### 継続中・予定機能

- ✅ **ファビコン設定**: https://llll-ll.com/ と同一ファビコン適用済み
- 📋 **SEO 最適化**: meta description、OG タグ強化
- 🔧 **エラーハンドリング**: 404 ページ、エラー境界設定
- 📊 **アクセス解析**: Google Analytics 統合検討

## 品質保証・運用指針

### コード品質

- **TypeScript**: 厳密型チェック有効
- **ESLint**: Next.js 推奨設定
- **CSS**: BEM 記法不使用、CSS Variables 活用
- **アクセシビリティ**: セマンティック HTML、キーボードナビゲーション

### デプロイメント

- **推奨環境**: Vercel（Next.js 最適化）
- **ビルド設定**: 静的エクスポート対応
- **環境変数**: 本番・開発環境分離
- **CI/CD**: Git push 時自動デプロイ

この仕様書は実装状況に合わせて継続的に更新されます。

## プロジェクト概要

- **サイト名**: llll-ll
- **ドメイン**: llll-lll.com (42 を意味する符号)
- **作者**: kako-jun
- **目的**: 個人のゲーム・アプリ開発者のポートフォリオサイト

## 技術スタック要件

- **フレームワーク**: Next.js 15+ (App Router)
- **レンダリング**: Server-Side Rendering (SSR) 優先
- **ホスティング**: Vercel
- **ドメイン**: 独自ドメイン (サブドメイン使用禁止)
- **パフォーマンス**: 軽量表示を最優先
- **スタイリング**: CSS Variables + インラインスタイル

## デザインコンセプト

- **テーマ**: レトロ・サイバーパンク風 UI
- **色調**: ダーク基調 + ファミコン風ピクセルアート
- **企業感**: 排除 (個人サイトらしさを重視)
- **画像制限**: 大容量画像禁止、過剰アニメーション禁止
- **許可アニメーション**:
  - 任天堂ライクな軽微な動作効果
  - ピクセルアート (スライム、猫等)
  - テトリス風ランダム積み上げアニメーション

## ユーザーエクスペリエンス (UX) 要件

- **ページ遷移**: 完全 SPA (Single Page Application)
- **テキスト**: 最小限、視認性重視
- **対応デバイス**: モバイルファースト設計 (PC 対応含む)
- **レスポンシブ**: 統一デザイン (PC 専用レイアウト禁止)
- **レイアウト**: センタリング表示

## 多言語対応仕様

- **初期画面**: 言語選択 UI (英語・中国語・日本語)
- **表示形式**: テキストボタン (国旗使用禁止)
- **言語平等**: 上下関係を示唆する配置禁止
- **切り替え動作**: ページ遷移なしでコンテンツ表示

## アプリケーション構成

1. **言語選択インターフェース**

   - フルスクリーン言語選択画面
   - プレビューメッセージ表示機能
   - 継続ボタンでメインコンテンツ表示

2. **イントロダクションセクション**

   - 折りたたみ可能な説明文
   - 初回訪問者向けガイダンス

3. **画像表示エリア**

   - トップページ用イラスト表示
   - ImageDisplay コンポーネント実装

4. **プロダクトギャラリー**
   - メインコンテンツエリア
   - 製品一覧表示機能

## ヘッダー・フッター仕様

### ヘッダー要件

- **表示内容**: サイト名 "llll-ll" 常時表示
- **デザイン**: 圧迫感のないミニマル設計
- **配置**: Sticky positioning
- **高さ**: 統一された高さ設定 (0.5rem padding)

### フッター要件

- **背景画像**: 金沢駅画像 (横長)
- **プロフィール画像**: 作者近影 (正方形、左寄せ配置)
- **レイヤー構成**: 背景画像上にプロフィール画像重ね
- **SNS リンク**: Instagram, Note, Zenn, X, GitHub
- **連絡先**: メールアドレス非表示

## プロダクト管理システム

### 表示機能

- **スケーラビリティ**: 100 件以上対応、ページネーション不使用
- **レイアウト**: Instagram 風グリッドレイアウト (2-3 列)
- **遅延読み込み**: Lazy loading 対応
- **モーダル表示**: 個別プロダクト詳細表示
- **URL 管理**: 固有 URL パス対応 (言語+プロダクト状態)

### ソート・フィルタリング機能

- **デフォルトソート**: 時系列順 (新着上位)
- **リバースソート**: 逆順表示機能
- **検索機能**: インクリメンタルサーチ
- **タグフィルタ**: カテゴリ別絞り込み

### プロダクト情報構成

- **優先表示**: 画像 (スクリーンショット、プレビュー)
- **タグシステム**:
  - 価格タグ (無料/有料)
  - 表示言語タグ
  - 開発言語/技術タグ
- **メディアコンテンツ**:
  - 複数スクリーンショット
  - アニメーション GIF
  - 動画埋め込み対応
- **関連リンク**:
  - README.md
  - 開発日誌 (Zenn 等)
  - デモページ
  - サポートフォーラム

## 技術実装アーキテクチャ

### データ管理

- **コンポーネント設計**: 1 プロダクト = 1 コンポーネント
- **データ形式**: YAML 定義ファイル
- **データ配置**: サイト内埋め込み (外部 API 依存なし)
- **更新方式**: ソースコード更新によるデプロイ

### UI コンポーネント構成

- **LanguageSelector**: 言語選択・切り替え機能
- **Header**: サイトヘッダー
- **IntroSection**: イントロダクション
- **ImageDisplay**: 画像表示エリア
- **ProjectList**: プロダクト一覧表示
- **ProjectCard**: 個別プロダクトカード
- **ProjectModal**: プロダクト詳細モーダル
- **Footer**: サイトフッター
- **PixelAnimations**: ピクセルアートアニメーション

### テーマシステム

- **ダーク/ライトモード**: 切り替え可能
- **CSS Variables**: カスタムプロパティ使用
- **トグルスイッチ**: ヘッダーエリア配置

## 実装済み機能状況

- ✅ 多言語対応システム (英語・中国語・日本語完全対応)
- ✅ テーマ切り替え機能 (ダーク/ライトモード)
- ✅ レスポンシブレイアウト (モバイルファースト設計)
- ✅ プロダクトデータ管理 (YAML→API 変換システム)
- ✅ ソート・検索機能 (リアルタイム絞り込み)
- ✅ モーダル表示システム (プロダクト詳細表示)
- ✅ SNS アイコン統合 (GitHub, X, Instagram, Zenn, Note)
- ✅ ピクセルアニメーション (背景装飾システム)
- ✅ ヘッダー高さ統一 (言語セレクター・メインヘッダー調整完了)
- ✅ ファビコン設定 (llll-ll.com 同一アイコン適用済み)

## 最新実装アップデート (2024 年 12 月)

### ✅ ヘッダーゲーム機能実装

- **インタラクティブブロックゲーム**: ヘッダー内に統合された隠しゲーム要素
- **タップでブロック生成**: ヘッダーの任意の位置をタップするとその座標にブロックが降下
- **自動ブロック生成**: 10 秒間隔で画面上部からランダム位置にブロック自動生成
- **積み上げシステム**: ブロックが正しく積み重なり、物理的な積み上げ効果を実現
- **全消し機能**: ブロックが上端まで積み上がると全てのブロックが自動削除
- **ブロック削除**: 個別ブロックをクリックして削除可能
- **技術実装**: useCallback・useEffect による効率的な状態管理とアニメーション

### ✅ テーマ統一デザイン改善

- **四角いテーマスイッチ**: 丸型から四角型に変更（メイン・404 ページ両方）
- **ScrollToTop ボタン強化**: 通常時は丸型、ホバー時に四角型へアニメーション変化
- **統一されたピクセルデザイン**: サイト全体で四角いデザイン要素に統一

### ✅ VSCode デバッグ環境整備

- **F5 デバッグ起動**: VSCode で F5 キーによるワンクリック開発サーバー起動
- **クロスプラットフォーム対応**: Linux・Windows 両環境で動作する npm scripts 使用
- **自動ブラウザ起動**: サーバー起動後、利用可能ポートで自動的にブラウザオープン
- **ポート自動調整**: 3000 番ポート使用中でも 3001、3002 等に自動切り替え
- **タスク統合**: 開発・ビルド・リント用の VSCode タスクを完全設定

### ✅ BackgroundDots アニメーション

- **ランダム配置**: 固定位置から動的なランダム配置に変更
- **正方形ドット**: ゲームらしいピクセル感を演出する四角形ドット
- **メイン・404 ページ統合**: 両ページに統一されたアニメーション要素を追加

### ✅ 404 ページゲーム強化

- **数字順序ゲーム**: 1-16 の番号を順番にクリックする反応速度ゲーム
- **ゲーム間隔調整**: ゲーム終了とホームボタンの間隔を 6rem に拡大
- **UI 統合**: BackgroundDots とテーマスイッチの四角化で統一感向上

### ✅ パフォーマンス・型安全性向上

- **型定義最適化**: web-vitals.ts の`any`型を Metric 型に変更
- **Service Worker 最適化**: 型安全性を保ちつつ JavaScript 環境で適切に動作
- **依存関係整理**: useCallback による関数メモ化でレンダリング最適化

### 技術実装詳細

#### ヘッダーブロックゲームアーキテクチャ

```typescript
interface Block {
  id: number;
  x: number; // ヘッダー内の X 座標
  y: number; // 落下位置（-16 から開始）
  color: string; // CSS変数による色指定
  isClicked: boolean; // 削除フラグ
}

// 10秒間隔での自動生成 + クリック位置での即座生成
// 16px間隔での積み上げ計算 + 上端到達時の全消し処理
```

#### VSCode デバッグ設定

```json
{
  "name": "Launch Next.js Dev Server",
  "runtimeExecutable": "npm",
  "runtimeArgs": ["run", "dev"],
  "serverReadyAction": {
    "pattern": "- Local:.*http://localhost:([0-9]+)",
    "action": "openExternally"
  }
}
```

### プロジェクト最終状態

- **完全自立運用**: VSCode で F5 一発起動・自動ブラウザ起動完備
- **インタラクティブ要素**: ヘッダーゲーム・404 ページゲーム・ScrollToTop アニメーション
- **統一デザイン**: 四角いピクセルテーマで全コンポーネント統合
- **型安全性**: TypeScript 完全対応・エラーゼロ状態
- **クロスプラットフォーム**: Linux・Windows 完全対応

### ファビコン設定完了

- **実装日**: 2024 年 12 月
- **内容**: https://llll-ll.com/images/favicon.ico から公式ファビコンをダウンロードし、プロジェクトに適用
- **ファイル**: `public/favicon.ico` を更新

### UI 統一性改善

- **ヘッダー高さ調整**: `LanguageSelector.tsx` のパディングを `1rem 0` から `0.5rem 0` に変更し、`Header.tsx` と統一
- **視覚的整合性**: 言語選択バーとメインヘッダーの高さを統一し、一貫した UI 体験を実現
